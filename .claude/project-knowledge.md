# 実装パターン・設計決定の知見

## アーキテクチャ設計
### クラス設計
- **Tetromino**: ピース（ブロック）の形状、色、位置を管理
- **GameBoard**: ゲーム盤面の状態管理、衝突検出、ライン消去
- **TetrisGame**: ゲーム全体のロジック、UI制御、イベント処理

### 責務分離の原則
- 各クラスは単一責任を持つ
- ピース操作とボード管理を明確に分離
- 描画ロジックはゲームクラスに集約

## Canvas描画パターン
### 効率的な描画手法
- フレーム毎の全画面クリア → 必要部分の再描画
- ブロックサイズ（30px）を基準とした座標計算
- 次のピース表示用の独立Canvas使用

### 座標系統一
- ゲーム座標（0-9, 0-19）とピクセル座標の明確な変換
- オフセット計算による正確な描画位置決定

## イベント処理設計
### キーボード操作
- `keydown`イベントによるリアルタイム操作
- `preventDefault()`によるブラウザデフォルト動作抑制
- ゲームオーバー時の操作無効化

## スコアリングシステム
### 標準テトリス準拠
- 1ライン: 40点 × レベル
- 2ライン: 100点 × レベル  
- 3ライン: 300点 × レベル
- 4ライン: 1200点 × レベル

## 避けるべきパターン
### ❌ アンチパターン
- グローバル変数の多用
- DOM要素の頻繁な書き換え
- 回転時の境界チェック不備
- テストなしでの実装進行

### ✅ 推奨パターン
- クラスベースの責務分離
- requestAnimationFrame使用
- 事前の境界・衝突チェック
- テスト先行開発