<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>テトリス</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- タイトル画面 -->
    <div id="titleScreen" class="title-screen">
        <h1>TETRIS</h1>
        <div class="subtitle">Press SPACE to Start</div>
        
        <div class="game-mode-selector">
            <h3>ゲームモード</h3>
            <div class="mode-buttons">
                <button id="manualModeBtn" class="mode-btn active">手動プレイ</button>
                <button id="autoModeBtn" class="mode-btn">オートプレイ</button>
            </div>
            <div id="autoplaySettings" class="autoplay-settings hidden">
                <label>AI難易度:</label>
                <select id="aiDifficulty">
                    <option value="easy">簡単</option>
                    <option value="normal" selected>普通</option>
                    <option value="hard">難しい</option>
                    <option value="expert">エキスパート</option>
                </select>
                <label>プレイ速度:</label>
                <input type="range" id="autoplaySpeed" min="0.2" max="5.0" step="0.1" value="1.0">
                <span id="speedDisplay">1.0x</span>
            </div>
        </div>
        
        <div class="instructions">
            <h4>操作方法</h4>
            <p>← → : 左右移動</p>
            <p>↓ : 高速落下</p>
            <p>↑ : 回転</p>
            <p>スペース : ハードドロップ</p>
            <p>C : ホールド</p>
            <p id="autoModeInstructions" class="hidden">ESC : 手動介入</p>
        </div>
    </div>

    <div class="container">
        <!-- 左側パネル：スコア、ホールド、操作説明 -->
        <div class="left-panel">
            <div class="score-section">
                <div class="score">スコア: <span id="score">0</span></div>
                <div class="level">レベル: <span id="level">1</span></div>
                <div class="lines">ライン: <span id="lines">0</span></div>
            </div>
            
            <div class="hold-piece">
                <h3>HOLD</h3>
                <canvas id="holdCanvas" width="80" height="80"></canvas>
            </div>
            
            <div class="controls">
                <h4>操作方法</h4>
                <p>← → : 左右移動</p>
                <p>↓ : 高速落下</p>
                <p>↑ : 回転</p>
                <p>スペース : ハードドロップ</p>
                <p>C : ホールド</p>
            </div>
        </div>

        <!-- 中央：ゲームフィールド -->
        <div class="game-area">
            <canvas id="gameCanvas" width="300" height="600"></canvas>
        </div>

        <!-- 右側パネル：NEXT表示 -->
        <div class="right-panel">
            <div class="next-pieces">
                <h3>NEXT</h3>
                <div class="next-list">
                    <canvas id="next1Canvas" width="70" height="70"></canvas>
                    <canvas id="next2Canvas" width="60" height="60"></canvas>
                    <canvas id="next3Canvas" width="50" height="50"></canvas>
                    <canvas id="next4Canvas" width="40" height="40"></canvas>
                    <canvas id="next5Canvas" width="40" height="40"></canvas>
                </div>
            </div>
        </div>
    </div>
    
    <!-- JavaScript読み込み（依存関係順） -->
    
    <!-- 1. 基本データ構造 -->
    <script src="src/tetris.js"></script>
    
    <!-- 2. ゲーム状態管理 -->
    <script src="src/game-state.js"></script>
    <script src="src/hold-next.js"></script>
    
    <!-- 3. 高度なテクニック -->
    <script src="src/advanced-techniques.js"></script>
    
    <!-- 4. AI実装 -->
    <script src="src/autoplay.js"></script>
    
    <!-- 5. メインゲーム -->
    <script src="src/game.js"></script>
    
    <script>
        // 初期化確認
        window.addEventListener('load', function() {
            console.log('=== クラス存在確認 ===');
            console.log('Tetromino:', typeof Tetromino !== 'undefined' ? '✓' : '✗');
            console.log('GameBoard:', typeof GameBoard !== 'undefined' ? '✓' : '✗');
            console.log('TetrisAI:', typeof TetrisAI !== 'undefined' ? '✓' : '✗');
            console.log('TetrisGame:', typeof TetrisGame !== 'undefined' ? '✓' : '✗');
            console.log('=== 初期化完了 ===');
        });
    </script>
</body>
</html>